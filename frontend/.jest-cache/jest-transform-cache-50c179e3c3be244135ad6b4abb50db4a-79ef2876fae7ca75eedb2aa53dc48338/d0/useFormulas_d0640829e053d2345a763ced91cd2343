361526724a71c3b1625ef167acce0b51
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useFormulas = exports.useFormulaSubscription = exports.useFormulaSearch = exports.useFormulaDetails = exports.useFeaturedFormulas = void 0;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _formulas = require("../services/api/formulas");
var useFormulas = exports.useFormulas = function useFormulas() {
  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var _params$page = params.page,
    initialPage = _params$page === void 0 ? 1 : _params$page,
    _params$per_page = params.per_page,
    per_page = _params$per_page === void 0 ? 20 : _params$per_page,
    search = params.search,
    _params$sort_by = params.sort_by,
    sort_by = _params$sort_by === void 0 ? 'performance' : _params$sort_by,
    _params$sort_order = params.sort_order,
    sort_order = _params$sort_order === void 0 ? 'desc' : _params$sort_order,
    _params$filters = params.filters,
    filters = _params$filters === void 0 ? {} : _params$filters,
    _params$enabled = params.enabled,
    enabled = _params$enabled === void 0 ? true : _params$enabled;
  var _useState = (0, _react.useState)([]),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    formulas = _useState2[0],
    setFormulas = _useState2[1];
  var _useState3 = (0, _react.useState)(0),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    total = _useState4[0],
    setTotal = _useState4[1];
  var _useState5 = (0, _react.useState)(initialPage),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    page = _useState6[0],
    setPage = _useState6[1];
  var _useState7 = (0, _react.useState)(false),
    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),
    loading = _useState8[0],
    setLoading = _useState8[1];
  var _useState9 = (0, _react.useState)(null),
    _useState0 = (0, _slicedToArray2.default)(_useState9, 2),
    error = _useState0[0],
    setError = _useState0[1];
  var _useState1 = (0, _react.useState)(false),
    _useState10 = (0, _slicedToArray2.default)(_useState1, 2),
    hasNext = _useState10[0],
    setHasNext = _useState10[1];
  var _useState11 = (0, _react.useState)(true),
    _useState12 = (0, _slicedToArray2.default)(_useState11, 2),
    hasMore = _useState12[0],
    setHasMore = _useState12[1];
  var paramsRef = (0, _react.useRef)(params);
  paramsRef.current = params;
  var fetchFormulas = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    var pageNum = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
    var append = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    if (!enabled) return;
    setLoading(true);
    setError(null);
    try {
      var _response$total, _response$page;
      var service = _formulas.FormulaService || _formulas.formulaApiService;
      var _params = {
        page: pageNum,
        perPage: per_page,
        sortBy: sort_by,
        sortOrder: sort_order
      };
      if (search) _params.search = search;
      if (filters && Object.keys(filters).length > 0) {
        if (filters.is_free !== undefined) {
          _params.isFree = filters.is_free;
        }
        if (filters.category) {
          _params.category = filters.category;
        }
      }
      var response = yield service.getFormulas(_params);
      var list = Array.isArray(response == null ? void 0 : response.formulas) ? response.formulas : [];
      var dedupe = function dedupe(items) {
        var seen = new Set();
        var out = [];
        for (var it of items) {
          if (!seen.has(it.id)) {
            seen.add(it.id);
            out.push(it);
          }
        }
        return out;
      };
      if (append) {
        setFormulas(function (prev) {
          return dedupe([].concat((0, _toConsumableArray2.default)(prev), (0, _toConsumableArray2.default)(list)));
        });
      } else {
        setFormulas(dedupe(list));
      }
      setTotal((_response$total = response == null ? void 0 : response.total) != null ? _response$total : list.length);
      setPage((_response$page = response == null ? void 0 : response.page) != null ? _response$page : pageNum);
      var next = response && 'has_next' in response ? Boolean(response.has_next) : list.length >= per_page;
      setHasNext(next);
      setHasMore(next);
    } catch (err) {
      var errorMessage = err instanceof Error ? err.message : 'Failed to fetch formulas';
      setError(errorMessage);
      console.error('Error fetching formulas:', err);
    } finally {
      setLoading(false);
    }
  }), [enabled, per_page, search, sort_by, sort_order, filters]);
  var refetch = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    setPage(1);
    yield fetchFormulas(1, false);
  }), [fetchFormulas]);
  var loadMore = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    if (loading) return;
    var nextPage = page + 1;
    yield fetchFormulas(nextPage, true);
  }), [loading, page, fetchFormulas]);
  (0, _react.useEffect)(function () {
    fetchFormulas(1, false);
  }, [fetchFormulas]);
  return {
    formulas: formulas,
    total: total,
    page: page,
    per_page: per_page,
    has_next: hasNext,
    loading: loading,
    error: error,
    refetch: refetch,
    loadMore: loadMore,
    hasMore: hasMore
  };
};
var useFeaturedFormulas = exports.useFeaturedFormulas = function useFeaturedFormulas() {
  var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;
  var _useState13 = (0, _react.useState)([]),
    _useState14 = (0, _slicedToArray2.default)(_useState13, 2),
    formulas = _useState14[0],
    setFormulas = _useState14[1];
  var _useState15 = (0, _react.useState)(false),
    _useState16 = (0, _slicedToArray2.default)(_useState15, 2),
    loading = _useState16[0],
    setLoading = _useState16[1];
  var _useState17 = (0, _react.useState)(null),
    _useState18 = (0, _slicedToArray2.default)(_useState17, 2),
    error = _useState18[0],
    setError = _useState18[1];
  var fetchFeaturedFormulas = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    setLoading(true);
    setError(null);
    try {
      var service = _formulas.FormulaService || _formulas.formulaApiService;
      var data = yield service.getFeaturedFormulas(limit);
      setFormulas(Array.isArray(data) ? data : []);
    } catch (err) {
      var errorMessage = err instanceof Error ? err.message : 'Failed to fetch featured formulas';
      setError(errorMessage);
      console.error('Error fetching featured formulas:', err);
    } finally {
      setLoading(false);
    }
  }), [limit]);
  (0, _react.useEffect)(function () {
    fetchFeaturedFormulas();
  }, [fetchFeaturedFormulas]);
  return {
    formulas: formulas,
    loading: loading,
    error: error,
    refetch: fetchFeaturedFormulas
  };
};
var useFormulaDetails = exports.useFormulaDetails = function useFormulaDetails(formulaId) {
  var _useState19 = (0, _react.useState)(null),
    _useState20 = (0, _slicedToArray2.default)(_useState19, 2),
    formula = _useState20[0],
    setFormula = _useState20[1];
  var _useState21 = (0, _react.useState)(false),
    _useState22 = (0, _slicedToArray2.default)(_useState21, 2),
    loading = _useState22[0],
    setLoading = _useState22[1];
  var _useState23 = (0, _react.useState)(null),
    _useState24 = (0, _slicedToArray2.default)(_useState23, 2),
    error = _useState24[0],
    setError = _useState24[1];
  var fetchFormulaDetails = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    if (!formulaId) return;
    setLoading(true);
    setError(null);
    try {
      var service = _formulas.FormulaService || _formulas.formulaApiService;
      var data = yield service.getFormulaById(formulaId);
      setFormula(data);
    } catch (err) {
      var errorMessage = err instanceof Error ? err.message : 'Failed to fetch formula details';
      setError(errorMessage);
      console.error('Error fetching formula details:', err);
    } finally {
      setLoading(false);
    }
  }), [formulaId]);
  (0, _react.useEffect)(function () {
    fetchFormulaDetails();
  }, [fetchFormulaDetails]);
  return {
    formula: formula,
    loading: loading,
    error: error,
    refetch: fetchFormulaDetails
  };
};
var useFormulaSubscription = exports.useFormulaSubscription = function useFormulaSubscription(formulaId) {
  var userSubscriptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  var _useState25 = (0, _react.useState)(false),
    _useState26 = (0, _slicedToArray2.default)(_useState25, 2),
    loading = _useState26[0],
    setLoading = _useState26[1];
  var _useState27 = (0, _react.useState)(null),
    _useState28 = (0, _slicedToArray2.default)(_useState27, 2),
    error = _useState28[0],
    setError = _useState28[1];
  var isSubscribed = userSubscriptions.some(function (sub) {
    return sub.formula_id === formulaId && sub.status === 'active';
  });
  var subscribe = (0, _react.useCallback)(function () {
    var _ref6 = (0, _asyncToGenerator2.default)(function* (billingPeriod) {
      setLoading(true);
      setError(null);
      try {
        yield _formulas.formulaApiService.subscribeToFormula(formulaId, billingPeriod);
      } catch (err) {
        var errorMessage = err instanceof Error ? err.message : 'Failed to subscribe to formula';
        setError(errorMessage);
        console.error('Error subscribing to formula:', err);
        throw err;
      } finally {
        setLoading(false);
      }
    });
    return function (_x) {
      return _ref6.apply(this, arguments);
    };
  }(), [formulaId]);
  var unsubscribe = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    var subscription = userSubscriptions.find(function (sub) {
      return sub.formula_id === formulaId && sub.status === 'active';
    });
    if (!subscription) return;
    setLoading(true);
    setError(null);
    try {
      yield _formulas.formulaApiService.unsubscribeFromFormula(subscription.id);
    } catch (err) {
      var errorMessage = err instanceof Error ? err.message : 'Failed to unsubscribe from formula';
      setError(errorMessage);
      console.error('Error unsubscribing from formula:', err);
      throw err;
    } finally {
      setLoading(false);
    }
  }), [formulaId, userSubscriptions]);
  return {
    isSubscribed: isSubscribed,
    loading: loading,
    error: error,
    subscribe: subscribe,
    unsubscribe: unsubscribe
  };
};
var useFormulaSearch = exports.useFormulaSearch = function useFormulaSearch() {
  var _useState29 = (0, _react.useState)([]),
    _useState30 = (0, _slicedToArray2.default)(_useState29, 2),
    results = _useState30[0],
    setResults = _useState30[1];
  var _useState31 = (0, _react.useState)(false),
    _useState32 = (0, _slicedToArray2.default)(_useState31, 2),
    loading = _useState32[0],
    setLoading = _useState32[1];
  var _useState33 = (0, _react.useState)(null),
    _useState34 = (0, _slicedToArray2.default)(_useState33, 2),
    error = _useState34[0],
    setError = _useState34[1];
  var search = (0, _react.useCallback)(function () {
    var _ref8 = (0, _asyncToGenerator2.default)(function* (query) {
      if (!query.trim()) {
        setResults([]);
        return;
      }
      setLoading(true);
      setError(null);
      try {
        var data = yield _formulas.formulaApiService.searchFormulas(query);
        setResults(data);
      } catch (err) {
        var errorMessage = err instanceof Error ? err.message : 'Failed to search formulas';
        setError(errorMessage);
        console.error('Error searching formulas:', err);
      } finally {
        setLoading(false);
      }
    });
    return function (_x2) {
      return _ref8.apply(this, arguments);
    };
  }(), []);
  var clearResults = (0, _react.useCallback)(function () {
    setResults([]);
    setError(null);
  }, []);
  return {
    results: results,
    loading: loading,
    error: error,
    search: search,
    clearResults: clearResults
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2Zvcm11bGFzIiwidXNlRm9ybXVsYXMiLCJleHBvcnRzIiwicGFyYW1zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX3BhcmFtcyRwYWdlIiwicGFnZSIsImluaXRpYWxQYWdlIiwiX3BhcmFtcyRwZXJfcGFnZSIsInBlcl9wYWdlIiwic2VhcmNoIiwiX3BhcmFtcyRzb3J0X2J5Iiwic29ydF9ieSIsIl9wYXJhbXMkc29ydF9vcmRlciIsInNvcnRfb3JkZXIiLCJfcGFyYW1zJGZpbHRlcnMiLCJmaWx0ZXJzIiwiX3BhcmFtcyRlbmFibGVkIiwiZW5hYmxlZCIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJmb3JtdWxhcyIsInNldEZvcm11bGFzIiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJ0b3RhbCIsInNldFRvdGFsIiwiX3VzZVN0YXRlNSIsIl91c2VTdGF0ZTYiLCJzZXRQYWdlIiwiX3VzZVN0YXRlNyIsIl91c2VTdGF0ZTgiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsIl91c2VTdGF0ZTkiLCJfdXNlU3RhdGUwIiwiZXJyb3IiLCJzZXRFcnJvciIsIl91c2VTdGF0ZTEiLCJfdXNlU3RhdGUxMCIsImhhc05leHQiLCJzZXRIYXNOZXh0IiwiX3VzZVN0YXRlMTEiLCJfdXNlU3RhdGUxMiIsImhhc01vcmUiLCJzZXRIYXNNb3JlIiwicGFyYW1zUmVmIiwidXNlUmVmIiwiY3VycmVudCIsImZldGNoRm9ybXVsYXMiLCJ1c2VDYWxsYmFjayIsIl9hc3luY1RvR2VuZXJhdG9yMiIsInBhZ2VOdW0iLCJhcHBlbmQiLCJfcmVzcG9uc2UkdG90YWwiLCJfcmVzcG9uc2UkcGFnZSIsInNlcnZpY2UiLCJGb3JtdWxhU2VydmljZSIsImZvcm11bGFBcGlTZXJ2aWNlIiwicGVyUGFnZSIsInNvcnRCeSIsInNvcnRPcmRlciIsIk9iamVjdCIsImtleXMiLCJpc19mcmVlIiwiaXNGcmVlIiwiY2F0ZWdvcnkiLCJyZXNwb25zZSIsImdldEZvcm11bGFzIiwibGlzdCIsIkFycmF5IiwiaXNBcnJheSIsImRlZHVwZSIsIml0ZW1zIiwic2VlbiIsIlNldCIsIm91dCIsIml0IiwiaGFzIiwiaWQiLCJhZGQiLCJwdXNoIiwicHJldiIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJuZXh0IiwiQm9vbGVhbiIsImhhc19uZXh0IiwiZXJyIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiY29uc29sZSIsInJlZmV0Y2giLCJsb2FkTW9yZSIsIm5leHRQYWdlIiwidXNlRWZmZWN0IiwidXNlRmVhdHVyZWRGb3JtdWxhcyIsImxpbWl0IiwiX3VzZVN0YXRlMTMiLCJfdXNlU3RhdGUxNCIsIl91c2VTdGF0ZTE1IiwiX3VzZVN0YXRlMTYiLCJfdXNlU3RhdGUxNyIsIl91c2VTdGF0ZTE4IiwiZmV0Y2hGZWF0dXJlZEZvcm11bGFzIiwiZGF0YSIsImdldEZlYXR1cmVkRm9ybXVsYXMiLCJ1c2VGb3JtdWxhRGV0YWlscyIsImZvcm11bGFJZCIsIl91c2VTdGF0ZTE5IiwiX3VzZVN0YXRlMjAiLCJmb3JtdWxhIiwic2V0Rm9ybXVsYSIsIl91c2VTdGF0ZTIxIiwiX3VzZVN0YXRlMjIiLCJfdXNlU3RhdGUyMyIsIl91c2VTdGF0ZTI0IiwiZmV0Y2hGb3JtdWxhRGV0YWlscyIsImdldEZvcm11bGFCeUlkIiwidXNlRm9ybXVsYVN1YnNjcmlwdGlvbiIsInVzZXJTdWJzY3JpcHRpb25zIiwiX3VzZVN0YXRlMjUiLCJfdXNlU3RhdGUyNiIsIl91c2VTdGF0ZTI3IiwiX3VzZVN0YXRlMjgiLCJpc1N1YnNjcmliZWQiLCJzb21lIiwic3ViIiwiZm9ybXVsYV9pZCIsInN0YXR1cyIsInN1YnNjcmliZSIsIl9yZWY2IiwiYmlsbGluZ1BlcmlvZCIsInN1YnNjcmliZVRvRm9ybXVsYSIsIl94IiwiYXBwbHkiLCJ1bnN1YnNjcmliZSIsInN1YnNjcmlwdGlvbiIsImZpbmQiLCJ1bnN1YnNjcmliZUZyb21Gb3JtdWxhIiwidXNlRm9ybXVsYVNlYXJjaCIsIl91c2VTdGF0ZTI5IiwiX3VzZVN0YXRlMzAiLCJyZXN1bHRzIiwic2V0UmVzdWx0cyIsIl91c2VTdGF0ZTMxIiwiX3VzZVN0YXRlMzIiLCJfdXNlU3RhdGUzMyIsIl91c2VTdGF0ZTM0IiwiX3JlZjgiLCJxdWVyeSIsInRyaW0iLCJzZWFyY2hGb3JtdWxhcyIsIl94MiIsImNsZWFyUmVzdWx0cyJdLCJzb3VyY2VzIjpbInVzZUZvcm11bGFzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDdXN0b20gSG9va3MgZm9yIEZvcm11bGEgTWFuYWdlbWVudFxyXG4gKiBcclxuICogUHJvdmlkZXMgUmVhY3QgaG9va3MgZm9yIGZldGNoaW5nLCBtYW5hZ2luZywgYW5kIGludGVyYWN0aW5nIHdpdGggZm9ybXVsYXMuXHJcbiAqIEluY2x1ZGVzIGNhY2hpbmcsIGVycm9yIGhhbmRsaW5nLCBhbmQgbG9hZGluZyBzdGF0ZXMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRm9ybXVsYVJlc3BvbnNlLCBGb3JtdWxhU2VhcmNoUmVzcG9uc2UsIEZvcm11bGFGaWx0ZXJzIH0gZnJvbSAnLi4vdHlwZXMvYXBpJztcclxuaW1wb3J0IHsgZm9ybXVsYUFwaVNlcnZpY2UsIEZvcm11bGFTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvYXBpL2Zvcm11bGFzJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVVNFIEZPUk1VTEFTIEhPT0tcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VGb3JtdWxhc1BhcmFtcyB7XHJcbiAgcGFnZT86IG51bWJlcjtcclxuICBwZXJfcGFnZT86IG51bWJlcjtcclxuICBzZWFyY2g/OiBzdHJpbmc7XHJcbiAgc29ydF9ieT86IHN0cmluZztcclxuICBzb3J0X29yZGVyPzogJ2FzYycgfCAnZGVzYyc7XHJcbiAgZmlsdGVycz86IFBhcnRpYWw8Rm9ybXVsYUZpbHRlcnM+O1xyXG4gIGVuYWJsZWQ/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZUZvcm11bGFzUmV0dXJuIHtcclxuICBmb3JtdWxhczogRm9ybXVsYVJlc3BvbnNlW107XHJcbiAgdG90YWw6IG51bWJlcjtcclxuICBwYWdlOiBudW1iZXI7XHJcbiAgcGVyX3BhZ2U6IG51bWJlcjtcclxuICBoYXNfbmV4dDogYm9vbGVhbjtcclxuICBsb2FkaW5nOiBib29sZWFuO1xyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xyXG4gIHJlZmV0Y2g6ICgpID0+IFByb21pc2U8dm9pZD47XHJcbiAgbG9hZE1vcmU6ICgpID0+IFByb21pc2U8dm9pZD47XHJcbiAgaGFzTW9yZTogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVzZUZvcm11bGFzID0gKHBhcmFtczogVXNlRm9ybXVsYXNQYXJhbXMgPSB7fSk6IFVzZUZvcm11bGFzUmV0dXJuID0+IHtcclxuICBjb25zdCB7XHJcbiAgICBwYWdlOiBpbml0aWFsUGFnZSA9IDEsXHJcbiAgICBwZXJfcGFnZSA9IDIwLFxyXG4gICAgc2VhcmNoLFxyXG4gICAgc29ydF9ieSA9ICdwZXJmb3JtYW5jZScsXHJcbiAgICBzb3J0X29yZGVyID0gJ2Rlc2MnLFxyXG4gICAgZmlsdGVycyA9IHt9LFxyXG4gICAgZW5hYmxlZCA9IHRydWUsXHJcbiAgfSA9IHBhcmFtcztcclxuXHJcbiAgY29uc3QgW2Zvcm11bGFzLCBzZXRGb3JtdWxhc10gPSB1c2VTdGF0ZTxGb3JtdWxhUmVzcG9uc2VbXT4oW10pO1xyXG4gIGNvbnN0IFt0b3RhbCwgc2V0VG90YWxdID0gdXNlU3RhdGUoMCk7XHJcbiAgY29uc3QgW3BhZ2UsIHNldFBhZ2VdID0gdXNlU3RhdGUoaW5pdGlhbFBhZ2UpO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtoYXNOZXh0LCBzZXRIYXNOZXh0XSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbaGFzTW9yZSwgc2V0SGFzTW9yZV0gPSB1c2VTdGF0ZSh0cnVlKTtcclxuXHJcbiAgY29uc3QgcGFyYW1zUmVmID0gdXNlUmVmKHBhcmFtcyk7XHJcbiAgcGFyYW1zUmVmLmN1cnJlbnQgPSBwYXJhbXM7XHJcblxyXG4gIGNvbnN0IGZldGNoRm9ybXVsYXMgPSB1c2VDYWxsYmFjayhhc3luYyAocGFnZU51bTogbnVtYmVyID0gMSwgYXBwZW5kOiBib29sZWFuID0gZmFsc2UpID0+IHtcclxuICAgIGlmICghZW5hYmxlZCkgcmV0dXJuO1xyXG5cclxuICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzZXJ2aWNlOiBhbnkgPSAoRm9ybXVsYVNlcnZpY2UgYXMgYW55KSB8fCBmb3JtdWxhQXBpU2VydmljZTtcclxuICAgICAgY29uc3QgcGFyYW1zOiBhbnkgPSB7XHJcbiAgICAgICAgcGFnZTogcGFnZU51bSxcclxuICAgICAgICBwZXJQYWdlOiBwZXJfcGFnZSxcclxuICAgICAgICBzb3J0Qnk6IHNvcnRfYnksXHJcbiAgICAgICAgc29ydE9yZGVyOiBzb3J0X29yZGVyLFxyXG4gICAgICB9O1xyXG4gICAgICBpZiAoc2VhcmNoKSBwYXJhbXMuc2VhcmNoID0gc2VhcmNoO1xyXG4gICAgICBpZiAoZmlsdGVycyAmJiBPYmplY3Qua2V5cyhmaWx0ZXJzKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgaWYgKChmaWx0ZXJzIGFzIGFueSkuaXNfZnJlZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBwYXJhbXMuaXNGcmVlID0gKGZpbHRlcnMgYXMgYW55KS5pc19mcmVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKGZpbHRlcnMgYXMgYW55KS5jYXRlZ29yeSkge1xyXG4gICAgICAgICAgcGFyYW1zLmNhdGVnb3J5ID0gKGZpbHRlcnMgYXMgYW55KS5jYXRlZ29yeTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZXJ2aWNlLmdldEZvcm11bGFzKHBhcmFtcyk7XHJcblxyXG4gICAgICBjb25zdCBsaXN0OiBGb3JtdWxhUmVzcG9uc2VbXSA9IEFycmF5LmlzQXJyYXkocmVzcG9uc2U/LmZvcm11bGFzKSA/IHJlc3BvbnNlLmZvcm11bGFzIDogW107XHJcbiAgICAgIGNvbnN0IGRlZHVwZSA9IChpdGVtczogRm9ybXVsYVJlc3BvbnNlW10pID0+IHtcclxuICAgICAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgY29uc3Qgb3V0OiBGb3JtdWxhUmVzcG9uc2VbXSA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgaXQgb2YgaXRlbXMpIHtcclxuICAgICAgICAgIGlmICghc2Vlbi5oYXMoaXQuaWQpKSB7XHJcbiAgICAgICAgICAgIHNlZW4uYWRkKGl0LmlkKTtcclxuICAgICAgICAgICAgb3V0LnB1c2goaXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgICB9O1xyXG4gICAgICBpZiAoYXBwZW5kKSB7XHJcbiAgICAgICAgc2V0Rm9ybXVsYXMocHJldiA9PiBkZWR1cGUoWy4uLnByZXYsIC4uLmxpc3RdKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0Rm9ybXVsYXMoZGVkdXBlKGxpc3QpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0VG90YWwocmVzcG9uc2U/LnRvdGFsID8/IGxpc3QubGVuZ3RoKTtcclxuICAgICAgc2V0UGFnZShyZXNwb25zZT8ucGFnZSA/PyBwYWdlTnVtKTtcclxuICAgICAgY29uc3QgbmV4dCA9IChyZXNwb25zZSAmJiAnaGFzX25leHQnIGluIChyZXNwb25zZSBhcyBhbnkpKVxyXG4gICAgICAgID8gQm9vbGVhbigocmVzcG9uc2UgYXMgYW55KS5oYXNfbmV4dClcclxuICAgICAgICA6IChsaXN0Lmxlbmd0aCA+PSBwZXJfcGFnZSk7XHJcbiAgICAgIHNldEhhc05leHQobmV4dCk7XHJcbiAgICAgIHNldEhhc01vcmUobmV4dCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggZm9ybXVsYXMnO1xyXG4gICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBmb3JtdWxhczonLCBlcnIpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW2VuYWJsZWQsIHBlcl9wYWdlLCBzZWFyY2gsIHNvcnRfYnksIHNvcnRfb3JkZXIsIGZpbHRlcnNdKTtcclxuXHJcbiAgY29uc3QgcmVmZXRjaCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIHNldFBhZ2UoMSk7XHJcbiAgICBhd2FpdCBmZXRjaEZvcm11bGFzKDEsIGZhbHNlKTtcclxuICB9LCBbZmV0Y2hGb3JtdWxhc10pO1xyXG5cclxuICBjb25zdCBsb2FkTW9yZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmIChsb2FkaW5nKSByZXR1cm47XHJcbiAgICBjb25zdCBuZXh0UGFnZSA9IHBhZ2UgKyAxO1xyXG4gICAgYXdhaXQgZmV0Y2hGb3JtdWxhcyhuZXh0UGFnZSwgdHJ1ZSk7XHJcbiAgfSwgW2xvYWRpbmcsIHBhZ2UsIGZldGNoRm9ybXVsYXNdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGZldGNoRm9ybXVsYXMoMSwgZmFsc2UpO1xyXG4gIH0sIFtmZXRjaEZvcm11bGFzXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBmb3JtdWxhcyxcclxuICAgIHRvdGFsLFxyXG4gICAgcGFnZSxcclxuICAgIHBlcl9wYWdlLFxyXG4gICAgaGFzX25leHQ6IGhhc05leHQsXHJcbiAgICBsb2FkaW5nLFxyXG4gICAgZXJyb3IsXHJcbiAgICByZWZldGNoLFxyXG4gICAgbG9hZE1vcmUsXHJcbiAgICBoYXNNb3JlLFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFVTRSBGRUFUVVJFRCBGT1JNVUxBUyBIT09LXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlRmVhdHVyZWRGb3JtdWxhc1JldHVybiB7XHJcbiAgZm9ybXVsYXM6IEZvcm11bGFSZXNwb25zZVtdO1xyXG4gIGxvYWRpbmc6IGJvb2xlYW47XHJcbiAgZXJyb3I6IHN0cmluZyB8IG51bGw7XHJcbiAgcmVmZXRjaDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVzZUZlYXR1cmVkRm9ybXVsYXMgPSAobGltaXQ6IG51bWJlciA9IDEwKTogVXNlRmVhdHVyZWRGb3JtdWxhc1JldHVybiA9PiB7XHJcbiAgY29uc3QgW2Zvcm11bGFzLCBzZXRGb3JtdWxhc10gPSB1c2VTdGF0ZTxGb3JtdWxhUmVzcG9uc2VbXT4oW10pO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG5cclxuICBjb25zdCBmZXRjaEZlYXR1cmVkRm9ybXVsYXMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgc2V0RXJyb3IobnVsbCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2VydmljZTogYW55ID0gKEZvcm11bGFTZXJ2aWNlIGFzIGFueSkgfHwgZm9ybXVsYUFwaVNlcnZpY2U7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzZXJ2aWNlLmdldEZlYXR1cmVkRm9ybXVsYXMobGltaXQpO1xyXG4gICAgICBzZXRGb3JtdWxhcyhBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtdKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBmZWF0dXJlZCBmb3JtdWxhcyc7XHJcbiAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGZlYXR1cmVkIGZvcm11bGFzOicsIGVycik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9LCBbbGltaXRdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGZldGNoRmVhdHVyZWRGb3JtdWxhcygpO1xyXG4gIH0sIFtmZXRjaEZlYXR1cmVkRm9ybXVsYXNdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGZvcm11bGFzLFxyXG4gICAgbG9hZGluZyxcclxuICAgIGVycm9yLFxyXG4gICAgcmVmZXRjaDogZmV0Y2hGZWF0dXJlZEZvcm11bGFzLFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFVTRSBGT1JNVUxBIERFVEFJTFMgSE9PS1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZUZvcm11bGFEZXRhaWxzUmV0dXJuIHtcclxuICBmb3JtdWxhOiBGb3JtdWxhUmVzcG9uc2UgfCBudWxsO1xyXG4gIGxvYWRpbmc6IGJvb2xlYW47XHJcbiAgZXJyb3I6IHN0cmluZyB8IG51bGw7XHJcbiAgcmVmZXRjaDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVzZUZvcm11bGFEZXRhaWxzID0gKGZvcm11bGFJZDogc3RyaW5nIHwgbnVsbCk6IFVzZUZvcm11bGFEZXRhaWxzUmV0dXJuID0+IHtcclxuICBjb25zdCBbZm9ybXVsYSwgc2V0Rm9ybXVsYV0gPSB1c2VTdGF0ZTxGb3JtdWxhUmVzcG9uc2UgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgY29uc3QgZmV0Y2hGb3JtdWxhRGV0YWlscyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghZm9ybXVsYUlkKSByZXR1cm47XHJcblxyXG4gICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgIHNldEVycm9yKG51bGwpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlcnZpY2U6IGFueSA9IChGb3JtdWxhU2VydmljZSBhcyBhbnkpIHx8IGZvcm11bGFBcGlTZXJ2aWNlO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgc2VydmljZS5nZXRGb3JtdWxhQnlJZChmb3JtdWxhSWQpO1xyXG4gICAgICBzZXRGb3JtdWxhKGRhdGEpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGZldGNoIGZvcm11bGEgZGV0YWlscyc7XHJcbiAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGZvcm11bGEgZGV0YWlsczonLCBlcnIpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW2Zvcm11bGFJZF0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hGb3JtdWxhRGV0YWlscygpO1xyXG4gIH0sIFtmZXRjaEZvcm11bGFEZXRhaWxzXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBmb3JtdWxhLFxyXG4gICAgbG9hZGluZyxcclxuICAgIGVycm9yLFxyXG4gICAgcmVmZXRjaDogZmV0Y2hGb3JtdWxhRGV0YWlscyxcclxuICB9O1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBVU0UgRk9STVVMQSBTVUJTQ1JJUFRJT04gSE9PS1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZUZvcm11bGFTdWJzY3JpcHRpb25SZXR1cm4ge1xyXG4gIGlzU3Vic2NyaWJlZDogYm9vbGVhbjtcclxuICBsb2FkaW5nOiBib29sZWFuO1xyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xyXG4gIHN1YnNjcmliZTogKGJpbGxpbmdQZXJpb2Q6ICdtb250aGx5JyB8ICd5ZWFybHknKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIHVuc3Vic2NyaWJlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgdXNlRm9ybXVsYVN1YnNjcmlwdGlvbiA9IChcclxuICBmb3JtdWxhSWQ6IHN0cmluZyxcclxuICB1c2VyU3Vic2NyaXB0aW9uczogYW55W10gPSBbXVxyXG4pOiBVc2VGb3JtdWxhU3Vic2NyaXB0aW9uUmV0dXJuID0+IHtcclxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgY29uc3QgaXNTdWJzY3JpYmVkID0gdXNlclN1YnNjcmlwdGlvbnMuc29tZShcclxuICAgIHN1YiA9PiBzdWIuZm9ybXVsYV9pZCA9PT0gZm9ybXVsYUlkICYmIHN1Yi5zdGF0dXMgPT09ICdhY3RpdmUnXHJcbiAgKTtcclxuXHJcbiAgY29uc3Qgc3Vic2NyaWJlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGJpbGxpbmdQZXJpb2Q6ICdtb250aGx5JyB8ICd5ZWFybHknKSA9PiB7XHJcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgc2V0RXJyb3IobnVsbCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZm9ybXVsYUFwaVNlcnZpY2Uuc3Vic2NyaWJlVG9Gb3JtdWxhKGZvcm11bGFJZCwgYmlsbGluZ1BlcmlvZCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gc3Vic2NyaWJlIHRvIGZvcm11bGEnO1xyXG4gICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdWJzY3JpYmluZyB0byBmb3JtdWxhOicsIGVycik7XHJcbiAgICAgIHRocm93IGVycjtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtmb3JtdWxhSWRdKTtcclxuXHJcbiAgY29uc3QgdW5zdWJzY3JpYmUgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB1c2VyU3Vic2NyaXB0aW9ucy5maW5kKFxyXG4gICAgICBzdWIgPT4gc3ViLmZvcm11bGFfaWQgPT09IGZvcm11bGFJZCAmJiBzdWIuc3RhdHVzID09PSAnYWN0aXZlJ1xyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXN1YnNjcmlwdGlvbikgcmV0dXJuO1xyXG5cclxuICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBmb3JtdWxhQXBpU2VydmljZS51bnN1YnNjcmliZUZyb21Gb3JtdWxhKHN1YnNjcmlwdGlvbi5pZCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gdW5zdWJzY3JpYmUgZnJvbSBmb3JtdWxhJztcclxuICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdW5zdWJzY3JpYmluZyBmcm9tIGZvcm11bGE6JywgZXJyKTtcclxuICAgICAgdGhyb3cgZXJyO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW2Zvcm11bGFJZCwgdXNlclN1YnNjcmlwdGlvbnNdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlzU3Vic2NyaWJlZCxcclxuICAgIGxvYWRpbmcsXHJcbiAgICBlcnJvcixcclxuICAgIHN1YnNjcmliZSxcclxuICAgIHVuc3Vic2NyaWJlLFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFVTRSBGT1JNVUxBIFNFQVJDSCBIT09LXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlRm9ybXVsYVNlYXJjaFJldHVybiB7XHJcbiAgcmVzdWx0czogRm9ybXVsYVJlc3BvbnNlW107XHJcbiAgbG9hZGluZzogYm9vbGVhbjtcclxuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcclxuICBzZWFyY2g6IChxdWVyeTogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGNsZWFyUmVzdWx0czogKCkgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVzZUZvcm11bGFTZWFyY2ggPSAoKTogVXNlRm9ybXVsYVNlYXJjaFJldHVybiA9PiB7XHJcbiAgY29uc3QgW3Jlc3VsdHMsIHNldFJlc3VsdHNdID0gdXNlU3RhdGU8Rm9ybXVsYVJlc3BvbnNlW10+KFtdKTtcclxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgY29uc3Qgc2VhcmNoID0gdXNlQ2FsbGJhY2soYXN5bmMgKHF1ZXJ5OiBzdHJpbmcpID0+IHtcclxuICAgIGlmICghcXVlcnkudHJpbSgpKSB7XHJcbiAgICAgIHNldFJlc3VsdHMoW10pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgIHNldEVycm9yKG51bGwpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmb3JtdWxhQXBpU2VydmljZS5zZWFyY2hGb3JtdWxhcyhxdWVyeSk7XHJcbiAgICAgIHNldFJlc3VsdHMoZGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VhcmNoIGZvcm11bGFzJztcclxuICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIGZvcm11bGFzOicsIGVycik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IGNsZWFyUmVzdWx0cyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIHNldFJlc3VsdHMoW10pO1xyXG4gICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVzdWx0cyxcclxuICAgIGxvYWRpbmcsXHJcbiAgICBlcnJvcixcclxuICAgIHNlYXJjaCxcclxuICAgIGNsZWFyUmVzdWx0cyxcclxuICB9O1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBT0EsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBRUEsSUFBQUMsU0FBQSxHQUFBRCxPQUFBO0FBNkJPLElBQU1FLFdBQVcsR0FBQUMsT0FBQSxDQUFBRCxXQUFBLEdBQUcsU0FBZEEsV0FBV0EsQ0FBQSxFQUEwRDtFQUFBLElBQXRERSxNQUF5QixHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRyxDQUFDLENBQUM7RUFDeEQsSUFBQUcsWUFBQSxHQVFJSixNQUFNLENBUFJLLElBQUk7SUFBRUMsV0FBVyxHQUFBRixZQUFBLGNBQUcsQ0FBQyxHQUFBQSxZQUFBO0lBQUFHLGdCQUFBLEdBT25CUCxNQUFNLENBTlJRLFFBQVE7SUFBUkEsUUFBUSxHQUFBRCxnQkFBQSxjQUFHLEVBQUUsR0FBQUEsZ0JBQUE7SUFDYkUsTUFBTSxHQUtKVCxNQUFNLENBTFJTLE1BQU07SUFBQUMsZUFBQSxHQUtKVixNQUFNLENBSlJXLE9BQU87SUFBUEEsT0FBTyxHQUFBRCxlQUFBLGNBQUcsYUFBYSxHQUFBQSxlQUFBO0lBQUFFLGtCQUFBLEdBSXJCWixNQUFNLENBSFJhLFVBQVU7SUFBVkEsVUFBVSxHQUFBRCxrQkFBQSxjQUFHLE1BQU0sR0FBQUEsa0JBQUE7SUFBQUUsZUFBQSxHQUdqQmQsTUFBTSxDQUZSZSxPQUFPO0lBQVBBLE9BQU8sR0FBQUQsZUFBQSxjQUFHLENBQUMsQ0FBQyxHQUFBQSxlQUFBO0lBQUFFLGVBQUEsR0FFVmhCLE1BQU0sQ0FEUmlCLE9BQU87SUFBUEEsT0FBTyxHQUFBRCxlQUFBLGNBQUcsSUFBSSxHQUFBQSxlQUFBO0VBR2hCLElBQUFFLFNBQUEsR0FBZ0MsSUFBQUMsZUFBUSxFQUFvQixFQUFFLENBQUM7SUFBQUMsVUFBQSxPQUFBQyxlQUFBLENBQUFDLE9BQUEsRUFBQUosU0FBQTtJQUF4REssUUFBUSxHQUFBSCxVQUFBO0lBQUVJLFdBQVcsR0FBQUosVUFBQTtFQUM1QixJQUFBSyxVQUFBLEdBQTBCLElBQUFOLGVBQVEsRUFBQyxDQUFDLENBQUM7SUFBQU8sVUFBQSxPQUFBTCxlQUFBLENBQUFDLE9BQUEsRUFBQUcsVUFBQTtJQUE5QkUsS0FBSyxHQUFBRCxVQUFBO0lBQUVFLFFBQVEsR0FBQUYsVUFBQTtFQUN0QixJQUFBRyxVQUFBLEdBQXdCLElBQUFWLGVBQVEsRUFBQ2IsV0FBVyxDQUFDO0lBQUF3QixVQUFBLE9BQUFULGVBQUEsQ0FBQUMsT0FBQSxFQUFBTyxVQUFBO0lBQXRDeEIsSUFBSSxHQUFBeUIsVUFBQTtJQUFFQyxPQUFPLEdBQUFELFVBQUE7RUFDcEIsSUFBQUUsVUFBQSxHQUE4QixJQUFBYixlQUFRLEVBQUMsS0FBSyxDQUFDO0lBQUFjLFVBQUEsT0FBQVosZUFBQSxDQUFBQyxPQUFBLEVBQUFVLFVBQUE7SUFBdENFLE9BQU8sR0FBQUQsVUFBQTtJQUFFRSxVQUFVLEdBQUFGLFVBQUE7RUFDMUIsSUFBQUcsVUFBQSxHQUEwQixJQUFBakIsZUFBUSxFQUFnQixJQUFJLENBQUM7SUFBQWtCLFVBQUEsT0FBQWhCLGVBQUEsQ0FBQUMsT0FBQSxFQUFBYyxVQUFBO0lBQWhERSxLQUFLLEdBQUFELFVBQUE7SUFBRUUsUUFBUSxHQUFBRixVQUFBO0VBQ3RCLElBQUFHLFVBQUEsR0FBOEIsSUFBQXJCLGVBQVEsRUFBQyxLQUFLLENBQUM7SUFBQXNCLFdBQUEsT0FBQXBCLGVBQUEsQ0FBQUMsT0FBQSxFQUFBa0IsVUFBQTtJQUF0Q0UsT0FBTyxHQUFBRCxXQUFBO0lBQUVFLFVBQVUsR0FBQUYsV0FBQTtFQUMxQixJQUFBRyxXQUFBLEdBQThCLElBQUF6QixlQUFRLEVBQUMsSUFBSSxDQUFDO0lBQUEwQixXQUFBLE9BQUF4QixlQUFBLENBQUFDLE9BQUEsRUFBQXNCLFdBQUE7SUFBckNFLE9BQU8sR0FBQUQsV0FBQTtJQUFFRSxVQUFVLEdBQUFGLFdBQUE7RUFFMUIsSUFBTUcsU0FBUyxHQUFHLElBQUFDLGFBQU0sRUFBQ2pELE1BQU0sQ0FBQztFQUNoQ2dELFNBQVMsQ0FBQ0UsT0FBTyxHQUFHbEQsTUFBTTtFQUUxQixJQUFNbUQsYUFBYSxHQUFHLElBQUFDLGtCQUFXLE1BQUFDLGtCQUFBLENBQUEvQixPQUFBLEVBQUMsYUFBd0Q7SUFBQSxJQUFqRGdDLE9BQWUsR0FBQXJELFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFHLENBQUM7SUFBQSxJQUFFc0QsTUFBZSxHQUFBdEQsU0FBQSxDQUFBQyxNQUFBLFFBQUFELFNBQUEsUUFBQUUsU0FBQSxHQUFBRixTQUFBLE1BQUcsS0FBSztJQUNuRixJQUFJLENBQUNnQixPQUFPLEVBQUU7SUFFZGtCLFVBQVUsQ0FBQyxJQUFJLENBQUM7SUFDaEJJLFFBQVEsQ0FBQyxJQUFJLENBQUM7SUFFZCxJQUFJO01BQUEsSUFBQWlCLGVBQUEsRUFBQUMsY0FBQTtNQUNGLElBQU1DLE9BQVksR0FBSUMsd0JBQWMsSUFBWUMsMkJBQWlCO01BQ2pFLElBQU01RCxPQUFXLEdBQUc7UUFDbEJLLElBQUksRUFBRWlELE9BQU87UUFDYk8sT0FBTyxFQUFFckQsUUFBUTtRQUNqQnNELE1BQU0sRUFBRW5ELE9BQU87UUFDZm9ELFNBQVMsRUFBRWxEO01BQ2IsQ0FBQztNQUNELElBQUlKLE1BQU0sRUFBRVQsT0FBTSxDQUFDUyxNQUFNLEdBQUdBLE1BQU07TUFDbEMsSUFBSU0sT0FBTyxJQUFJaUQsTUFBTSxDQUFDQyxJQUFJLENBQUNsRCxPQUFPLENBQUMsQ0FBQ2IsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUM5QyxJQUFLYSxPQUFPLENBQVNtRCxPQUFPLEtBQUsvRCxTQUFTLEVBQUU7VUFDMUNILE9BQU0sQ0FBQ21FLE1BQU0sR0FBSXBELE9BQU8sQ0FBU21ELE9BQU87UUFDMUM7UUFDQSxJQUFLbkQsT0FBTyxDQUFTcUQsUUFBUSxFQUFFO1VBQzdCcEUsT0FBTSxDQUFDb0UsUUFBUSxHQUFJckQsT0FBTyxDQUFTcUQsUUFBUTtRQUM3QztNQUNGO01BQ0EsSUFBTUMsUUFBUSxTQUFTWCxPQUFPLENBQUNZLFdBQVcsQ0FBQ3RFLE9BQU0sQ0FBQztNQUVsRCxJQUFNdUUsSUFBdUIsR0FBR0MsS0FBSyxDQUFDQyxPQUFPLENBQUNKLFFBQVEsb0JBQVJBLFFBQVEsQ0FBRTlDLFFBQVEsQ0FBQyxHQUFHOEMsUUFBUSxDQUFDOUMsUUFBUSxHQUFHLEVBQUU7TUFDMUYsSUFBTW1ELE1BQU0sR0FBRyxTQUFUQSxNQUFNQSxDQUFJQyxLQUF3QixFQUFLO1FBQzNDLElBQU1DLElBQUksR0FBRyxJQUFJQyxHQUFHLENBQVMsQ0FBQztRQUM5QixJQUFNQyxHQUFzQixHQUFHLEVBQUU7UUFDakMsS0FBSyxJQUFNQyxFQUFFLElBQUlKLEtBQUssRUFBRTtVQUN0QixJQUFJLENBQUNDLElBQUksQ0FBQ0ksR0FBRyxDQUFDRCxFQUFFLENBQUNFLEVBQUUsQ0FBQyxFQUFFO1lBQ3BCTCxJQUFJLENBQUNNLEdBQUcsQ0FBQ0gsRUFBRSxDQUFDRSxFQUFFLENBQUM7WUFDZkgsR0FBRyxDQUFDSyxJQUFJLENBQUNKLEVBQUUsQ0FBQztVQUNkO1FBQ0Y7UUFDQSxPQUFPRCxHQUFHO01BQ1osQ0FBQztNQUNELElBQUl2QixNQUFNLEVBQUU7UUFDVi9CLFdBQVcsQ0FBQyxVQUFBNEQsSUFBSTtVQUFBLE9BQUlWLE1BQU0sSUFBQVcsTUFBQSxLQUFBQyxtQkFBQSxDQUFBaEUsT0FBQSxFQUFLOEQsSUFBSSxPQUFBRSxtQkFBQSxDQUFBaEUsT0FBQSxFQUFLaUQsSUFBSSxFQUFDLENBQUM7UUFBQSxFQUFDO01BQ2pELENBQUMsTUFBTTtRQUNML0MsV0FBVyxDQUFDa0QsTUFBTSxDQUFDSCxJQUFJLENBQUMsQ0FBQztNQUMzQjtNQUVBM0MsUUFBUSxFQUFBNEIsZUFBQSxHQUFDYSxRQUFRLG9CQUFSQSxRQUFRLENBQUUxQyxLQUFLLFlBQUE2QixlQUFBLEdBQUllLElBQUksQ0FBQ3JFLE1BQU0sQ0FBQztNQUN4QzZCLE9BQU8sRUFBQTBCLGNBQUEsR0FBQ1ksUUFBUSxvQkFBUkEsUUFBUSxDQUFFaEUsSUFBSSxZQUFBb0QsY0FBQSxHQUFJSCxPQUFPLENBQUM7TUFDbEMsSUFBTWlDLElBQUksR0FBSWxCLFFBQVEsSUFBSSxVQUFVLElBQUtBLFFBQWdCLEdBQ3JEbUIsT0FBTyxDQUFFbkIsUUFBUSxDQUFTb0IsUUFBUSxDQUFDLEdBQ2xDbEIsSUFBSSxDQUFDckUsTUFBTSxJQUFJTSxRQUFTO01BQzdCbUMsVUFBVSxDQUFDNEMsSUFBSSxDQUFDO01BQ2hCeEMsVUFBVSxDQUFDd0MsSUFBSSxDQUFDO0lBQ2xCLENBQUMsQ0FBQyxPQUFPRyxHQUFHLEVBQUU7TUFDWixJQUFNQyxZQUFZLEdBQUdELEdBQUcsWUFBWUUsS0FBSyxHQUFHRixHQUFHLENBQUNHLE9BQU8sR0FBRywwQkFBMEI7TUFDcEZ0RCxRQUFRLENBQUNvRCxZQUFZLENBQUM7TUFDdEJHLE9BQU8sQ0FBQ3hELEtBQUssQ0FBQywwQkFBMEIsRUFBRW9ELEdBQUcsQ0FBQztJQUNoRCxDQUFDLFNBQVM7TUFDUnZELFVBQVUsQ0FBQyxLQUFLLENBQUM7SUFDbkI7RUFDRixDQUFDLEdBQUUsQ0FBQ2xCLE9BQU8sRUFBRVQsUUFBUSxFQUFFQyxNQUFNLEVBQUVFLE9BQU8sRUFBRUUsVUFBVSxFQUFFRSxPQUFPLENBQUMsQ0FBQztFQUU3RCxJQUFNZ0YsT0FBTyxHQUFHLElBQUEzQyxrQkFBVyxNQUFBQyxrQkFBQSxDQUFBL0IsT0FBQSxFQUFDLGFBQVk7SUFDdENTLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDVixNQUFNb0IsYUFBYSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUM7RUFDL0IsQ0FBQyxHQUFFLENBQUNBLGFBQWEsQ0FBQyxDQUFDO0VBRW5CLElBQU02QyxRQUFRLEdBQUcsSUFBQTVDLGtCQUFXLE1BQUFDLGtCQUFBLENBQUEvQixPQUFBLEVBQUMsYUFBWTtJQUN2QyxJQUFJWSxPQUFPLEVBQUU7SUFDYixJQUFNK0QsUUFBUSxHQUFHNUYsSUFBSSxHQUFHLENBQUM7SUFDekIsTUFBTThDLGFBQWEsQ0FBQzhDLFFBQVEsRUFBRSxJQUFJLENBQUM7RUFDckMsQ0FBQyxHQUFFLENBQUMvRCxPQUFPLEVBQUU3QixJQUFJLEVBQUU4QyxhQUFhLENBQUMsQ0FBQztFQUVsQyxJQUFBK0MsZ0JBQVMsRUFBQyxZQUFNO0lBQ2QvQyxhQUFhLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQztFQUN6QixDQUFDLEVBQUUsQ0FBQ0EsYUFBYSxDQUFDLENBQUM7RUFFbkIsT0FBTztJQUNMNUIsUUFBUSxFQUFSQSxRQUFRO0lBQ1JJLEtBQUssRUFBTEEsS0FBSztJQUNMdEIsSUFBSSxFQUFKQSxJQUFJO0lBQ0pHLFFBQVEsRUFBUkEsUUFBUTtJQUNSaUYsUUFBUSxFQUFFL0MsT0FBTztJQUNqQlIsT0FBTyxFQUFQQSxPQUFPO0lBQ1BJLEtBQUssRUFBTEEsS0FBSztJQUNMeUQsT0FBTyxFQUFQQSxPQUFPO0lBQ1BDLFFBQVEsRUFBUkEsUUFBUTtJQUNSbEQsT0FBTyxFQUFQQTtFQUNGLENBQUM7QUFDSCxDQUFDO0FBYU0sSUFBTXFELG1CQUFtQixHQUFBcEcsT0FBQSxDQUFBb0csbUJBQUEsR0FBRyxTQUF0QkEsbUJBQW1CQSxDQUFBLEVBQXNEO0VBQUEsSUFBbERDLEtBQWEsR0FBQW5HLFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFHLEVBQUU7RUFDcEQsSUFBQW9HLFdBQUEsR0FBZ0MsSUFBQWxGLGVBQVEsRUFBb0IsRUFBRSxDQUFDO0lBQUFtRixXQUFBLE9BQUFqRixlQUFBLENBQUFDLE9BQUEsRUFBQStFLFdBQUE7SUFBeEQ5RSxRQUFRLEdBQUErRSxXQUFBO0lBQUU5RSxXQUFXLEdBQUE4RSxXQUFBO0VBQzVCLElBQUFDLFdBQUEsR0FBOEIsSUFBQXBGLGVBQVEsRUFBQyxLQUFLLENBQUM7SUFBQXFGLFdBQUEsT0FBQW5GLGVBQUEsQ0FBQUMsT0FBQSxFQUFBaUYsV0FBQTtJQUF0Q3JFLE9BQU8sR0FBQXNFLFdBQUE7SUFBRXJFLFVBQVUsR0FBQXFFLFdBQUE7RUFDMUIsSUFBQUMsV0FBQSxHQUEwQixJQUFBdEYsZUFBUSxFQUFnQixJQUFJLENBQUM7SUFBQXVGLFdBQUEsT0FBQXJGLGVBQUEsQ0FBQUMsT0FBQSxFQUFBbUYsV0FBQTtJQUFoRG5FLEtBQUssR0FBQW9FLFdBQUE7SUFBRW5FLFFBQVEsR0FBQW1FLFdBQUE7RUFFdEIsSUFBTUMscUJBQXFCLEdBQUcsSUFBQXZELGtCQUFXLE1BQUFDLGtCQUFBLENBQUEvQixPQUFBLEVBQUMsYUFBWTtJQUNwRGEsVUFBVSxDQUFDLElBQUksQ0FBQztJQUNoQkksUUFBUSxDQUFDLElBQUksQ0FBQztJQUVkLElBQUk7TUFDRixJQUFNbUIsT0FBWSxHQUFJQyx3QkFBYyxJQUFZQywyQkFBaUI7TUFDakUsSUFBTWdELElBQUksU0FBU2xELE9BQU8sQ0FBQ21ELG1CQUFtQixDQUFDVCxLQUFLLENBQUM7TUFDckQ1RSxXQUFXLENBQUNnRCxLQUFLLENBQUNDLE9BQU8sQ0FBQ21DLElBQUksQ0FBQyxHQUFHQSxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQzlDLENBQUMsQ0FBQyxPQUFPbEIsR0FBRyxFQUFFO01BQ1osSUFBTUMsWUFBWSxHQUFHRCxHQUFHLFlBQVlFLEtBQUssR0FBR0YsR0FBRyxDQUFDRyxPQUFPLEdBQUcsbUNBQW1DO01BQzdGdEQsUUFBUSxDQUFDb0QsWUFBWSxDQUFDO01BQ3RCRyxPQUFPLENBQUN4RCxLQUFLLENBQUMsbUNBQW1DLEVBQUVvRCxHQUFHLENBQUM7SUFDekQsQ0FBQyxTQUFTO01BQ1J2RCxVQUFVLENBQUMsS0FBSyxDQUFDO0lBQ25CO0VBQ0YsQ0FBQyxHQUFFLENBQUNpRSxLQUFLLENBQUMsQ0FBQztFQUVYLElBQUFGLGdCQUFTLEVBQUMsWUFBTTtJQUNkUyxxQkFBcUIsQ0FBQyxDQUFDO0VBQ3pCLENBQUMsRUFBRSxDQUFDQSxxQkFBcUIsQ0FBQyxDQUFDO0VBRTNCLE9BQU87SUFDTHBGLFFBQVEsRUFBUkEsUUFBUTtJQUNSVyxPQUFPLEVBQVBBLE9BQU87SUFDUEksS0FBSyxFQUFMQSxLQUFLO0lBQ0x5RCxPQUFPLEVBQUVZO0VBQ1gsQ0FBQztBQUNILENBQUM7QUFhTSxJQUFNRyxpQkFBaUIsR0FBQS9HLE9BQUEsQ0FBQStHLGlCQUFBLEdBQUcsU0FBcEJBLGlCQUFpQkEsQ0FBSUMsU0FBd0IsRUFBOEI7RUFDdEYsSUFBQUMsV0FBQSxHQUE4QixJQUFBN0YsZUFBUSxFQUF5QixJQUFJLENBQUM7SUFBQThGLFdBQUEsT0FBQTVGLGVBQUEsQ0FBQUMsT0FBQSxFQUFBMEYsV0FBQTtJQUE3REUsT0FBTyxHQUFBRCxXQUFBO0lBQUVFLFVBQVUsR0FBQUYsV0FBQTtFQUMxQixJQUFBRyxXQUFBLEdBQThCLElBQUFqRyxlQUFRLEVBQUMsS0FBSyxDQUFDO0lBQUFrRyxXQUFBLE9BQUFoRyxlQUFBLENBQUFDLE9BQUEsRUFBQThGLFdBQUE7SUFBdENsRixPQUFPLEdBQUFtRixXQUFBO0lBQUVsRixVQUFVLEdBQUFrRixXQUFBO0VBQzFCLElBQUFDLFdBQUEsR0FBMEIsSUFBQW5HLGVBQVEsRUFBZ0IsSUFBSSxDQUFDO0lBQUFvRyxXQUFBLE9BQUFsRyxlQUFBLENBQUFDLE9BQUEsRUFBQWdHLFdBQUE7SUFBaERoRixLQUFLLEdBQUFpRixXQUFBO0lBQUVoRixRQUFRLEdBQUFnRixXQUFBO0VBRXRCLElBQU1DLG1CQUFtQixHQUFHLElBQUFwRSxrQkFBVyxNQUFBQyxrQkFBQSxDQUFBL0IsT0FBQSxFQUFDLGFBQVk7SUFDbEQsSUFBSSxDQUFDeUYsU0FBUyxFQUFFO0lBRWhCNUUsVUFBVSxDQUFDLElBQUksQ0FBQztJQUNoQkksUUFBUSxDQUFDLElBQUksQ0FBQztJQUVkLElBQUk7TUFDRixJQUFNbUIsT0FBWSxHQUFJQyx3QkFBYyxJQUFZQywyQkFBaUI7TUFDakUsSUFBTWdELElBQUksU0FBU2xELE9BQU8sQ0FBQytELGNBQWMsQ0FBQ1YsU0FBUyxDQUFDO01BQ3BESSxVQUFVLENBQUNQLElBQUksQ0FBQztJQUNsQixDQUFDLENBQUMsT0FBT2xCLEdBQUcsRUFBRTtNQUNaLElBQU1DLFlBQVksR0FBR0QsR0FBRyxZQUFZRSxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csT0FBTyxHQUFHLGlDQUFpQztNQUMzRnRELFFBQVEsQ0FBQ29ELFlBQVksQ0FBQztNQUN0QkcsT0FBTyxDQUFDeEQsS0FBSyxDQUFDLGlDQUFpQyxFQUFFb0QsR0FBRyxDQUFDO0lBQ3ZELENBQUMsU0FBUztNQUNSdkQsVUFBVSxDQUFDLEtBQUssQ0FBQztJQUNuQjtFQUNGLENBQUMsR0FBRSxDQUFDNEUsU0FBUyxDQUFDLENBQUM7RUFFZixJQUFBYixnQkFBUyxFQUFDLFlBQU07SUFDZHNCLG1CQUFtQixDQUFDLENBQUM7RUFDdkIsQ0FBQyxFQUFFLENBQUNBLG1CQUFtQixDQUFDLENBQUM7RUFFekIsT0FBTztJQUNMTixPQUFPLEVBQVBBLE9BQU87SUFDUGhGLE9BQU8sRUFBUEEsT0FBTztJQUNQSSxLQUFLLEVBQUxBLEtBQUs7SUFDTHlELE9BQU8sRUFBRXlCO0VBQ1gsQ0FBQztBQUNILENBQUM7QUFjTSxJQUFNRSxzQkFBc0IsR0FBQTNILE9BQUEsQ0FBQTJILHNCQUFBLEdBQUcsU0FBekJBLHNCQUFzQkEsQ0FDakNYLFNBQWlCLEVBRWdCO0VBQUEsSUFEakNZLGlCQUF3QixHQUFBMUgsU0FBQSxDQUFBQyxNQUFBLFFBQUFELFNBQUEsUUFBQUUsU0FBQSxHQUFBRixTQUFBLE1BQUcsRUFBRTtFQUU3QixJQUFBMkgsV0FBQSxHQUE4QixJQUFBekcsZUFBUSxFQUFDLEtBQUssQ0FBQztJQUFBMEcsV0FBQSxPQUFBeEcsZUFBQSxDQUFBQyxPQUFBLEVBQUFzRyxXQUFBO0lBQXRDMUYsT0FBTyxHQUFBMkYsV0FBQTtJQUFFMUYsVUFBVSxHQUFBMEYsV0FBQTtFQUMxQixJQUFBQyxXQUFBLEdBQTBCLElBQUEzRyxlQUFRLEVBQWdCLElBQUksQ0FBQztJQUFBNEcsV0FBQSxPQUFBMUcsZUFBQSxDQUFBQyxPQUFBLEVBQUF3RyxXQUFBO0lBQWhEeEYsS0FBSyxHQUFBeUYsV0FBQTtJQUFFeEYsUUFBUSxHQUFBd0YsV0FBQTtFQUV0QixJQUFNQyxZQUFZLEdBQUdMLGlCQUFpQixDQUFDTSxJQUFJLENBQ3pDLFVBQUFDLEdBQUc7SUFBQSxPQUFJQSxHQUFHLENBQUNDLFVBQVUsS0FBS3BCLFNBQVMsSUFBSW1CLEdBQUcsQ0FBQ0UsTUFBTSxLQUFLLFFBQVE7RUFBQSxDQUNoRSxDQUFDO0VBRUQsSUFBTUMsU0FBUyxHQUFHLElBQUFqRixrQkFBVztJQUFBLElBQUFrRixLQUFBLE9BQUFqRixrQkFBQSxDQUFBL0IsT0FBQSxFQUFDLFdBQU9pSCxhQUFtQyxFQUFLO01BQzNFcEcsVUFBVSxDQUFDLElBQUksQ0FBQztNQUNoQkksUUFBUSxDQUFDLElBQUksQ0FBQztNQUVkLElBQUk7UUFDRixNQUFNcUIsMkJBQWlCLENBQUM0RSxrQkFBa0IsQ0FBQ3pCLFNBQVMsRUFBRXdCLGFBQWEsQ0FBQztNQUN0RSxDQUFDLENBQUMsT0FBTzdDLEdBQUcsRUFBRTtRQUNaLElBQU1DLFlBQVksR0FBR0QsR0FBRyxZQUFZRSxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csT0FBTyxHQUFHLGdDQUFnQztRQUMxRnRELFFBQVEsQ0FBQ29ELFlBQVksQ0FBQztRQUN0QkcsT0FBTyxDQUFDeEQsS0FBSyxDQUFDLCtCQUErQixFQUFFb0QsR0FBRyxDQUFDO1FBQ25ELE1BQU1BLEdBQUc7TUFDWCxDQUFDLFNBQVM7UUFDUnZELFVBQVUsQ0FBQyxLQUFLLENBQUM7TUFDbkI7SUFDRixDQUFDO0lBQUEsaUJBQUFzRyxFQUFBO01BQUEsT0FBQUgsS0FBQSxDQUFBSSxLQUFBLE9BQUF6SSxTQUFBO0lBQUE7RUFBQSxLQUFFLENBQUM4RyxTQUFTLENBQUMsQ0FBQztFQUVmLElBQU00QixXQUFXLEdBQUcsSUFBQXZGLGtCQUFXLE1BQUFDLGtCQUFBLENBQUEvQixPQUFBLEVBQUMsYUFBWTtJQUMxQyxJQUFNc0gsWUFBWSxHQUFHakIsaUJBQWlCLENBQUNrQixJQUFJLENBQ3pDLFVBQUFYLEdBQUc7TUFBQSxPQUFJQSxHQUFHLENBQUNDLFVBQVUsS0FBS3BCLFNBQVMsSUFBSW1CLEdBQUcsQ0FBQ0UsTUFBTSxLQUFLLFFBQVE7SUFBQSxDQUNoRSxDQUFDO0lBRUQsSUFBSSxDQUFDUSxZQUFZLEVBQUU7SUFFbkJ6RyxVQUFVLENBQUMsSUFBSSxDQUFDO0lBQ2hCSSxRQUFRLENBQUMsSUFBSSxDQUFDO0lBRWQsSUFBSTtNQUNGLE1BQU1xQiwyQkFBaUIsQ0FBQ2tGLHNCQUFzQixDQUFDRixZQUFZLENBQUMzRCxFQUFFLENBQUM7SUFDakUsQ0FBQyxDQUFDLE9BQU9TLEdBQUcsRUFBRTtNQUNaLElBQU1DLFlBQVksR0FBR0QsR0FBRyxZQUFZRSxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csT0FBTyxHQUFHLG9DQUFvQztNQUM5RnRELFFBQVEsQ0FBQ29ELFlBQVksQ0FBQztNQUN0QkcsT0FBTyxDQUFDeEQsS0FBSyxDQUFDLG1DQUFtQyxFQUFFb0QsR0FBRyxDQUFDO01BQ3ZELE1BQU1BLEdBQUc7SUFDWCxDQUFDLFNBQVM7TUFDUnZELFVBQVUsQ0FBQyxLQUFLLENBQUM7SUFDbkI7RUFDRixDQUFDLEdBQUUsQ0FBQzRFLFNBQVMsRUFBRVksaUJBQWlCLENBQUMsQ0FBQztFQUVsQyxPQUFPO0lBQ0xLLFlBQVksRUFBWkEsWUFBWTtJQUNaOUYsT0FBTyxFQUFQQSxPQUFPO0lBQ1BJLEtBQUssRUFBTEEsS0FBSztJQUNMK0YsU0FBUyxFQUFUQSxTQUFTO0lBQ1RNLFdBQVcsRUFBWEE7RUFDRixDQUFDO0FBQ0gsQ0FBQztBQWNNLElBQU1JLGdCQUFnQixHQUFBaEosT0FBQSxDQUFBZ0osZ0JBQUEsR0FBRyxTQUFuQkEsZ0JBQWdCQSxDQUFBLEVBQWlDO0VBQzVELElBQUFDLFdBQUEsR0FBOEIsSUFBQTdILGVBQVEsRUFBb0IsRUFBRSxDQUFDO0lBQUE4SCxXQUFBLE9BQUE1SCxlQUFBLENBQUFDLE9BQUEsRUFBQTBILFdBQUE7SUFBdERFLE9BQU8sR0FBQUQsV0FBQTtJQUFFRSxVQUFVLEdBQUFGLFdBQUE7RUFDMUIsSUFBQUcsV0FBQSxHQUE4QixJQUFBakksZUFBUSxFQUFDLEtBQUssQ0FBQztJQUFBa0ksV0FBQSxPQUFBaEksZUFBQSxDQUFBQyxPQUFBLEVBQUE4SCxXQUFBO0lBQXRDbEgsT0FBTyxHQUFBbUgsV0FBQTtJQUFFbEgsVUFBVSxHQUFBa0gsV0FBQTtFQUMxQixJQUFBQyxXQUFBLEdBQTBCLElBQUFuSSxlQUFRLEVBQWdCLElBQUksQ0FBQztJQUFBb0ksV0FBQSxPQUFBbEksZUFBQSxDQUFBQyxPQUFBLEVBQUFnSSxXQUFBO0lBQWhEaEgsS0FBSyxHQUFBaUgsV0FBQTtJQUFFaEgsUUFBUSxHQUFBZ0gsV0FBQTtFQUV0QixJQUFNOUksTUFBTSxHQUFHLElBQUEyQyxrQkFBVztJQUFBLElBQUFvRyxLQUFBLE9BQUFuRyxrQkFBQSxDQUFBL0IsT0FBQSxFQUFDLFdBQU9tSSxLQUFhLEVBQUs7TUFDbEQsSUFBSSxDQUFDQSxLQUFLLENBQUNDLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDakJQLFVBQVUsQ0FBQyxFQUFFLENBQUM7UUFDZDtNQUNGO01BRUFoSCxVQUFVLENBQUMsSUFBSSxDQUFDO01BQ2hCSSxRQUFRLENBQUMsSUFBSSxDQUFDO01BRWQsSUFBSTtRQUNGLElBQU1xRSxJQUFJLFNBQVNoRCwyQkFBaUIsQ0FBQytGLGNBQWMsQ0FBQ0YsS0FBSyxDQUFDO1FBQzFETixVQUFVLENBQUN2QyxJQUFJLENBQUM7TUFDbEIsQ0FBQyxDQUFDLE9BQU9sQixHQUFHLEVBQUU7UUFDWixJQUFNQyxZQUFZLEdBQUdELEdBQUcsWUFBWUUsS0FBSyxHQUFHRixHQUFHLENBQUNHLE9BQU8sR0FBRywyQkFBMkI7UUFDckZ0RCxRQUFRLENBQUNvRCxZQUFZLENBQUM7UUFDdEJHLE9BQU8sQ0FBQ3hELEtBQUssQ0FBQywyQkFBMkIsRUFBRW9ELEdBQUcsQ0FBQztNQUNqRCxDQUFDLFNBQVM7UUFDUnZELFVBQVUsQ0FBQyxLQUFLLENBQUM7TUFDbkI7SUFDRixDQUFDO0lBQUEsaUJBQUF5SCxHQUFBO01BQUEsT0FBQUosS0FBQSxDQUFBZCxLQUFBLE9BQUF6SSxTQUFBO0lBQUE7RUFBQSxLQUFFLEVBQUUsQ0FBQztFQUVOLElBQU00SixZQUFZLEdBQUcsSUFBQXpHLGtCQUFXLEVBQUMsWUFBTTtJQUNyQytGLFVBQVUsQ0FBQyxFQUFFLENBQUM7SUFDZDVHLFFBQVEsQ0FBQyxJQUFJLENBQUM7RUFDaEIsQ0FBQyxFQUFFLEVBQUUsQ0FBQztFQUVOLE9BQU87SUFDTDJHLE9BQU8sRUFBUEEsT0FBTztJQUNQaEgsT0FBTyxFQUFQQSxPQUFPO0lBQ1BJLEtBQUssRUFBTEEsS0FBSztJQUNMN0IsTUFBTSxFQUFOQSxNQUFNO0lBQ05vSixZQUFZLEVBQVpBO0VBQ0YsQ0FBQztBQUNILENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=