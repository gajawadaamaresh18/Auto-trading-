3af42b26753fc3494e5c1d73faa160f5
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createPerformanceLogger;
exports.getCurrentTimestamp = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var Systrace = _interopRequireWildcard(require("../Performance/Systrace"));
var _Performance = _interopRequireDefault(require("../WebPerformance/Performance"));
var _infoLog = _interopRequireDefault(require("./infoLog"));
var _global$nativeQPLTime;
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
var _cookies = {};
var PRINT_TO_CONSOLE = false;
var WEB_PERFORMANCE_PREFIX = 'global_perf_';
var performance = new _Performance.default();
var getCurrentTimestamp = exports.getCurrentTimestamp = (_global$nativeQPLTime = global.nativeQPLTimestamp) != null ? _global$nativeQPLTime : global.performance.now.bind(global.performance);
var PerformanceLogger = function () {
  function PerformanceLogger(isLoggingForWebPerformance) {
    (0, _classCallCheck2.default)(this, PerformanceLogger);
    this._timespans = {};
    this._extras = {};
    this._points = {};
    this._pointExtras = {};
    this._closed = false;
    this._isLoggingForWebPerformance = false;
    this._isLoggingForWebPerformance = isLoggingForWebPerformance === true;
  }
  return (0, _createClass2.default)(PerformanceLogger, [{
    key: "addTimespan",
    value: function addTimespan(key, startTime, endTime, startExtras, endExtras) {
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: addTimespan - has closed ignoring: ', key);
        }
        return;
      }
      if (this._timespans[key]) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to add a timespan that already exists ', key);
        }
        return;
      }
      this._timespans[key] = {
        startTime: startTime,
        endTime: endTime,
        totalTime: endTime - (startTime || 0),
        startExtras: startExtras,
        endExtras: endExtras
      };
      if (this._isLoggingForWebPerformance) {
        performance.measure(`${WEB_PERFORMANCE_PREFIX}_${key}`, {
          start: startTime,
          end: endTime
        });
      }
    }
  }, {
    key: "append",
    value: function append(performanceLogger) {
      this._timespans = Object.assign({}, performanceLogger.getTimespans(), this._timespans);
      this._extras = Object.assign({}, performanceLogger.getExtras(), this._extras);
      this._points = Object.assign({}, performanceLogger.getPoints(), this._points);
      this._pointExtras = Object.assign({}, performanceLogger.getPointExtras(), this._pointExtras);
    }
  }, {
    key: "clear",
    value: function clear() {
      this._timespans = {};
      this._extras = {};
      this._points = {};
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'clear');
      }
    }
  }, {
    key: "clearCompleted",
    value: function clearCompleted() {
      for (var _key in this._timespans) {
        var _this$_timespans$_key;
        if (((_this$_timespans$_key = this._timespans[_key]) == null ? void 0 : _this$_timespans$_key.totalTime) != null) {
          delete this._timespans[_key];
        }
      }
      this._extras = {};
      this._points = {};
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'clearCompleted');
      }
    }
  }, {
    key: "close",
    value: function close() {
      this._closed = true;
    }
  }, {
    key: "currentTimestamp",
    value: function currentTimestamp() {
      return getCurrentTimestamp();
    }
  }, {
    key: "getExtras",
    value: function getExtras() {
      return this._extras;
    }
  }, {
    key: "getPoints",
    value: function getPoints() {
      return this._points;
    }
  }, {
    key: "getPointExtras",
    value: function getPointExtras() {
      return this._pointExtras;
    }
  }, {
    key: "getTimespans",
    value: function getTimespans() {
      return this._timespans;
    }
  }, {
    key: "hasTimespan",
    value: function hasTimespan(key) {
      return !!this._timespans[key];
    }
  }, {
    key: "isClosed",
    value: function isClosed() {
      return this._closed;
    }
  }, {
    key: "logEverything",
    value: function logEverything() {
      if (PRINT_TO_CONSOLE) {
        for (var _key2 in this._timespans) {
          var _this$_timespans$_key2;
          if (((_this$_timespans$_key2 = this._timespans[_key2]) == null ? void 0 : _this$_timespans$_key2.totalTime) != null) {
            (0, _infoLog.default)(_key2 + ': ' + this._timespans[_key2].totalTime + 'ms');
          }
        }
        (0, _infoLog.default)(this._extras);
        for (var _key3 in this._points) {
          if (this._points[_key3] != null) {
            (0, _infoLog.default)(_key3 + ': ' + this._points[_key3] + 'ms');
          }
        }
      }
    }
  }, {
    key: "markPoint",
    value: function markPoint(key) {
      var timestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentTimestamp();
      var extras = arguments.length > 2 ? arguments[2] : undefined;
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: markPoint - has closed ignoring: ', key);
        }
        return;
      }
      if (this._points[key] != null) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to mark a point that has been already logged ', key);
        }
        return;
      }
      this._points[key] = timestamp;
      if (extras) {
        this._pointExtras[key] = extras;
      }
      if (this._isLoggingForWebPerformance) {
        performance.mark(`${WEB_PERFORMANCE_PREFIX}_${key}`, {
          startTime: timestamp
        });
      }
    }
  }, {
    key: "removeExtra",
    value: function removeExtra(key) {
      var value = this._extras[key];
      delete this._extras[key];
      return value;
    }
  }, {
    key: "setExtra",
    value: function setExtra(key, value) {
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: setExtra - has closed ignoring: ', key);
        }
        return;
      }
      if (this._extras.hasOwnProperty(key)) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to set an extra that already exists ', {
            key: key,
            currentValue: this._extras[key],
            attemptedValue: value
          });
        }
        return;
      }
      this._extras[key] = value;
    }
  }, {
    key: "startTimespan",
    value: function startTimespan(key) {
      var timestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentTimestamp();
      var extras = arguments.length > 2 ? arguments[2] : undefined;
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: startTimespan - has closed ignoring: ', key);
        }
        return;
      }
      if (this._timespans[key]) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to start a timespan that already exists ', key);
        }
        return;
      }
      this._timespans[key] = {
        startTime: timestamp,
        startExtras: extras
      };
      _cookies[key] = Systrace.beginAsyncEvent(key);
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'start: ' + key);
      }
      if (this._isLoggingForWebPerformance) {
        performance.mark(`${WEB_PERFORMANCE_PREFIX}_timespan_start_${key}`, {
          startTime: timestamp
        });
      }
    }
  }, {
    key: "stopTimespan",
    value: function stopTimespan(key) {
      var timestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentTimestamp();
      var extras = arguments.length > 2 ? arguments[2] : undefined;
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: stopTimespan - has closed ignoring: ', key);
        }
        return;
      }
      var timespan = this._timespans[key];
      if (!timespan || timespan.startTime == null) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to end a timespan that has not started ', key);
        }
        return;
      }
      if (timespan.endTime != null) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to end a timespan that has already ended ', key);
        }
        return;
      }
      timespan.endExtras = extras;
      timespan.endTime = timestamp;
      timespan.totalTime = timespan.endTime - (timespan.startTime || 0);
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'end: ' + key);
      }
      if (_cookies[key] != null) {
        Systrace.endAsyncEvent(key, _cookies[key]);
        delete _cookies[key];
      }
      if (this._isLoggingForWebPerformance) {
        performance.measure(`${WEB_PERFORMANCE_PREFIX}_${key}`, {
          start: `${WEB_PERFORMANCE_PREFIX}_timespan_start_${key}`,
          end: timestamp
        });
      }
    }
  }]);
}();
function createPerformanceLogger(isLoggingForWebPerformance) {
  return new PerformanceLogger(isLoggingForWebPerformance);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTeXN0cmFjZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9QZXJmb3JtYW5jZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfaW5mb0xvZyIsIl9nbG9iYWwkbmF0aXZlUVBMVGltZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX2Nvb2tpZXMiLCJQUklOVF9UT19DT05TT0xFIiwiV0VCX1BFUkZPUk1BTkNFX1BSRUZJWCIsInBlcmZvcm1hbmNlIiwiUGVyZm9ybWFuY2UiLCJnZXRDdXJyZW50VGltZXN0YW1wIiwiZXhwb3J0cyIsImdsb2JhbCIsIm5hdGl2ZVFQTFRpbWVzdGFtcCIsIm5vdyIsImJpbmQiLCJQZXJmb3JtYW5jZUxvZ2dlciIsImlzTG9nZ2luZ0ZvcldlYlBlcmZvcm1hbmNlIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl90aW1lc3BhbnMiLCJfZXh0cmFzIiwiX3BvaW50cyIsIl9wb2ludEV4dHJhcyIsIl9jbG9zZWQiLCJfaXNMb2dnaW5nRm9yV2ViUGVyZm9ybWFuY2UiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJhZGRUaW1lc3BhbiIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJzdGFydEV4dHJhcyIsImVuZEV4dHJhcyIsIl9fREVWX18iLCJpbmZvTG9nIiwidG90YWxUaW1lIiwibWVhc3VyZSIsInN0YXJ0IiwiZW5kIiwiYXBwZW5kIiwicGVyZm9ybWFuY2VMb2dnZXIiLCJhc3NpZ24iLCJnZXRUaW1lc3BhbnMiLCJnZXRFeHRyYXMiLCJnZXRQb2ludHMiLCJnZXRQb2ludEV4dHJhcyIsImNsZWFyIiwiY2xlYXJDb21wbGV0ZWQiLCJfdGhpcyRfdGltZXNwYW5zJF9rZXkiLCJjbG9zZSIsImN1cnJlbnRUaW1lc3RhbXAiLCJoYXNUaW1lc3BhbiIsImlzQ2xvc2VkIiwibG9nRXZlcnl0aGluZyIsIl90aGlzJF90aW1lc3BhbnMkX2tleTIiLCJtYXJrUG9pbnQiLCJ0aW1lc3RhbXAiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJleHRyYXMiLCJtYXJrIiwicmVtb3ZlRXh0cmEiLCJzZXRFeHRyYSIsImN1cnJlbnRWYWx1ZSIsImF0dGVtcHRlZFZhbHVlIiwic3RhcnRUaW1lc3BhbiIsImJlZ2luQXN5bmNFdmVudCIsInN0b3BUaW1lc3BhbiIsInRpbWVzcGFuIiwiZW5kQXN5bmNFdmVudCIsImNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyIl0sInNvdXJjZXMiOlsiY3JlYXRlUGVyZm9ybWFuY2VMb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93IHN0cmljdFxuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtcbiAgRXh0cmFzLFxuICBFeHRyYVZhbHVlLFxuICBJUGVyZm9ybWFuY2VMb2dnZXIsXG4gIFRpbWVzcGFuLFxufSBmcm9tICcuL0lQZXJmb3JtYW5jZUxvZ2dlcic7XG5cbmltcG9ydCAqIGFzIFN5c3RyYWNlIGZyb20gJy4uL1BlcmZvcm1hbmNlL1N5c3RyYWNlJztcbmltcG9ydCBQZXJmb3JtYW5jZSBmcm9tICcuLi9XZWJQZXJmb3JtYW5jZS9QZXJmb3JtYW5jZSc7XG5pbXBvcnQgaW5mb0xvZyBmcm9tICcuL2luZm9Mb2cnO1xuXG5jb25zdCBfY29va2llczoge1trZXk6IHN0cmluZ106IG51bWJlciwgLi4ufSA9IHt9O1xuXG5jb25zdCBQUklOVF9UT19DT05TT0xFOiBmYWxzZSA9IGZhbHNlOyAvLyBUeXBlIGFzIGZhbHNlIHRvIHByZXZlbnQgYWNjaWRlbnRhbGx5IGNvbW1pdHRpbmcgYHRydWVgO1xuXG4vLyBUaGlzIGlzIHRoZSBwcmVmaXggZm9yIG9wdGlvbmFsIGxvZ2dpbmcgcG9pbnRzL3RpbWVzcGFucyBhcyBtYXJrcy9tZWFzdXJlcyB2aWEgUGVyZm9ybWFuY2UgQVBJLFxuLy8gdXNlZCB0byBzZXBhcmF0ZSB0aGVzZSBpbnRlcm5hbGx5IGZyb20gb3RoZXIgbWFya3MvbWVhc3VyZXNcbmNvbnN0IFdFQl9QRVJGT1JNQU5DRV9QUkVGSVggPSAnZ2xvYmFsX3BlcmZfJztcblxuLy8gVE9ETzogUmVtb3ZlIG9uY2UgVDE0MzA3MDQxOSBpcyBkb25lXG5jb25zdCBwZXJmb3JtYW5jZSA9IG5ldyBQZXJmb3JtYW5jZSgpO1xuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFRpbWVzdGFtcDogKCkgPT4gbnVtYmVyID1cbiAgZ2xvYmFsLm5hdGl2ZVFQTFRpbWVzdGFtcCA/PyBnbG9iYWwucGVyZm9ybWFuY2Uubm93LmJpbmQoZ2xvYmFsLnBlcmZvcm1hbmNlKTtcblxuY2xhc3MgUGVyZm9ybWFuY2VMb2dnZXIgaW1wbGVtZW50cyBJUGVyZm9ybWFuY2VMb2dnZXIge1xuICBfdGltZXNwYW5zOiB7W2tleTogc3RyaW5nXTogP1RpbWVzcGFufSA9IHt9O1xuICBfZXh0cmFzOiB7W2tleTogc3RyaW5nXTogP0V4dHJhVmFsdWV9ID0ge307XG4gIF9wb2ludHM6IHtba2V5OiBzdHJpbmddOiA/bnVtYmVyfSA9IHt9O1xuICBfcG9pbnRFeHRyYXM6IHtba2V5OiBzdHJpbmddOiA/RXh0cmFzLCAuLi59ID0ge307XG4gIF9jbG9zZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgX2lzTG9nZ2luZ0ZvcldlYlBlcmZvcm1hbmNlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoaXNMb2dnaW5nRm9yV2ViUGVyZm9ybWFuY2U/OiBib29sZWFuKSB7XG4gICAgdGhpcy5faXNMb2dnaW5nRm9yV2ViUGVyZm9ybWFuY2UgPSBpc0xvZ2dpbmdGb3JXZWJQZXJmb3JtYW5jZSA9PT0gdHJ1ZTtcbiAgfVxuXG4gIGFkZFRpbWVzcGFuKFxuICAgIGtleTogc3RyaW5nLFxuICAgIHN0YXJ0VGltZTogbnVtYmVyLFxuICAgIGVuZFRpbWU6IG51bWJlcixcbiAgICBzdGFydEV4dHJhcz86IEV4dHJhcyxcbiAgICBlbmRFeHRyYXM/OiBFeHRyYXMsXG4gICkge1xuICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZygnUGVyZm9ybWFuY2VMb2dnZXI6IGFkZFRpbWVzcGFuIC0gaGFzIGNsb3NlZCBpZ25vcmluZzogJywga2V5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RpbWVzcGFuc1trZXldKSB7XG4gICAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSAmJiBfX0RFVl9fKSB7XG4gICAgICAgIGluZm9Mb2coXG4gICAgICAgICAgJ1BlcmZvcm1hbmNlTG9nZ2VyOiBBdHRlbXB0aW5nIHRvIGFkZCBhIHRpbWVzcGFuIHRoYXQgYWxyZWFkeSBleGlzdHMgJyxcbiAgICAgICAgICBrZXksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fdGltZXNwYW5zW2tleV0gPSB7XG4gICAgICBzdGFydFRpbWUsXG4gICAgICBlbmRUaW1lLFxuICAgICAgdG90YWxUaW1lOiBlbmRUaW1lIC0gKHN0YXJ0VGltZSB8fCAwKSxcbiAgICAgIHN0YXJ0RXh0cmFzLFxuICAgICAgZW5kRXh0cmFzLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5faXNMb2dnaW5nRm9yV2ViUGVyZm9ybWFuY2UpIHtcbiAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoYCR7V0VCX1BFUkZPUk1BTkNFX1BSRUZJWH1fJHtrZXl9YCwge1xuICAgICAgICBzdGFydDogc3RhcnRUaW1lLFxuICAgICAgICBlbmQ6IGVuZFRpbWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhcHBlbmQocGVyZm9ybWFuY2VMb2dnZXI6IElQZXJmb3JtYW5jZUxvZ2dlcikge1xuICAgIHRoaXMuX3RpbWVzcGFucyA9IHtcbiAgICAgIC4uLnBlcmZvcm1hbmNlTG9nZ2VyLmdldFRpbWVzcGFucygpLFxuICAgICAgLi4udGhpcy5fdGltZXNwYW5zLFxuICAgIH07XG4gICAgdGhpcy5fZXh0cmFzID0gey4uLnBlcmZvcm1hbmNlTG9nZ2VyLmdldEV4dHJhcygpLCAuLi50aGlzLl9leHRyYXN9O1xuICAgIHRoaXMuX3BvaW50cyA9IHsuLi5wZXJmb3JtYW5jZUxvZ2dlci5nZXRQb2ludHMoKSwgLi4udGhpcy5fcG9pbnRzfTtcbiAgICB0aGlzLl9wb2ludEV4dHJhcyA9IHtcbiAgICAgIC4uLnBlcmZvcm1hbmNlTG9nZ2VyLmdldFBvaW50RXh0cmFzKCksXG4gICAgICAuLi50aGlzLl9wb2ludEV4dHJhcyxcbiAgICB9O1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5fdGltZXNwYW5zID0ge307XG4gICAgdGhpcy5fZXh0cmFzID0ge307XG4gICAgdGhpcy5fcG9pbnRzID0ge307XG4gICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUpIHtcbiAgICAgIGluZm9Mb2coJ1BlcmZvcm1hbmNlTG9nZ2VyLmpzJywgJ2NsZWFyJyk7XG4gICAgfVxuICB9XG5cbiAgY2xlYXJDb21wbGV0ZWQoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5fdGltZXNwYW5zKSB7XG4gICAgICBpZiAodGhpcy5fdGltZXNwYW5zW2tleV0/LnRvdGFsVGltZSAhPSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl90aW1lc3BhbnNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fZXh0cmFzID0ge307XG4gICAgdGhpcy5fcG9pbnRzID0ge307XG4gICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUpIHtcbiAgICAgIGluZm9Mb2coJ1BlcmZvcm1hbmNlTG9nZ2VyLmpzJywgJ2NsZWFyQ29tcGxldGVkJyk7XG4gICAgfVxuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fY2xvc2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGN1cnJlbnRUaW1lc3RhbXAoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gZ2V0Q3VycmVudFRpbWVzdGFtcCgpO1xuICB9XG5cbiAgZ2V0RXh0cmFzKCk6IHtba2V5OiBzdHJpbmddOiA/RXh0cmFWYWx1ZX0ge1xuICAgIHJldHVybiB0aGlzLl9leHRyYXM7XG4gIH1cblxuICBnZXRQb2ludHMoKToge1trZXk6IHN0cmluZ106ID9udW1iZXJ9IHtcbiAgICByZXR1cm4gdGhpcy5fcG9pbnRzO1xuICB9XG5cbiAgZ2V0UG9pbnRFeHRyYXMoKToge1trZXk6IHN0cmluZ106ID9FeHRyYXN9IHtcbiAgICByZXR1cm4gdGhpcy5fcG9pbnRFeHRyYXM7XG4gIH1cblxuICBnZXRUaW1lc3BhbnMoKToge1trZXk6IHN0cmluZ106ID9UaW1lc3Bhbn0ge1xuICAgIHJldHVybiB0aGlzLl90aW1lc3BhbnM7XG4gIH1cblxuICBoYXNUaW1lc3BhbihrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMuX3RpbWVzcGFuc1trZXldO1xuICB9XG5cbiAgaXNDbG9zZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2Nsb3NlZDtcbiAgfVxuXG4gIGxvZ0V2ZXJ5dGhpbmcoKSB7XG4gICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUpIHtcbiAgICAgIC8vIGxvZyB0aW1lc3BhbnNcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX3RpbWVzcGFucykge1xuICAgICAgICBpZiAodGhpcy5fdGltZXNwYW5zW2tleV0/LnRvdGFsVGltZSAhPSBudWxsKSB7XG4gICAgICAgICAgaW5mb0xvZyhrZXkgKyAnOiAnICsgdGhpcy5fdGltZXNwYW5zW2tleV0udG90YWxUaW1lICsgJ21zJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gbG9nIGV4dHJhc1xuICAgICAgaW5mb0xvZyh0aGlzLl9leHRyYXMpO1xuXG4gICAgICAvLyBsb2cgcG9pbnRzXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl9wb2ludHMpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BvaW50c1trZXldICE9IG51bGwpIHtcbiAgICAgICAgICBpbmZvTG9nKGtleSArICc6ICcgKyB0aGlzLl9wb2ludHNba2V5XSArICdtcycpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbWFya1BvaW50KFxuICAgIGtleTogc3RyaW5nLFxuICAgIHRpbWVzdGFtcD86IG51bWJlciA9IGdldEN1cnJlbnRUaW1lc3RhbXAoKSxcbiAgICBleHRyYXM/OiBFeHRyYXMsXG4gICkge1xuICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZygnUGVyZm9ybWFuY2VMb2dnZXI6IG1hcmtQb2ludCAtIGhhcyBjbG9zZWQgaWdub3Jpbmc6ICcsIGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9wb2ludHNba2V5XSAhPSBudWxsKSB7XG4gICAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSAmJiBfX0RFVl9fKSB7XG4gICAgICAgIGluZm9Mb2coXG4gICAgICAgICAgJ1BlcmZvcm1hbmNlTG9nZ2VyOiBBdHRlbXB0aW5nIHRvIG1hcmsgYSBwb2ludCB0aGF0IGhhcyBiZWVuIGFscmVhZHkgbG9nZ2VkICcsXG4gICAgICAgICAga2V5LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9wb2ludHNba2V5XSA9IHRpbWVzdGFtcDtcbiAgICBpZiAoZXh0cmFzKSB7XG4gICAgICB0aGlzLl9wb2ludEV4dHJhc1trZXldID0gZXh0cmFzO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pc0xvZ2dpbmdGb3JXZWJQZXJmb3JtYW5jZSkge1xuICAgICAgcGVyZm9ybWFuY2UubWFyayhgJHtXRUJfUEVSRk9STUFOQ0VfUFJFRklYfV8ke2tleX1gLCB7XG4gICAgICAgIHN0YXJ0VGltZTogdGltZXN0YW1wLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlRXh0cmEoa2V5OiBzdHJpbmcpOiA/RXh0cmFWYWx1ZSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLl9leHRyYXNba2V5XTtcbiAgICBkZWxldGUgdGhpcy5fZXh0cmFzW2tleV07XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgc2V0RXh0cmEoa2V5OiBzdHJpbmcsIHZhbHVlOiBFeHRyYVZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlcjogc2V0RXh0cmEgLSBoYXMgY2xvc2VkIGlnbm9yaW5nOiAnLCBrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9leHRyYXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKFxuICAgICAgICAgICdQZXJmb3JtYW5jZUxvZ2dlcjogQXR0ZW1wdGluZyB0byBzZXQgYW4gZXh0cmEgdGhhdCBhbHJlYWR5IGV4aXN0cyAnLFxuICAgICAgICAgIHtrZXksIGN1cnJlbnRWYWx1ZTogdGhpcy5fZXh0cmFzW2tleV0sIGF0dGVtcHRlZFZhbHVlOiB2YWx1ZX0sXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2V4dHJhc1trZXldID0gdmFsdWU7XG4gIH1cblxuICBzdGFydFRpbWVzcGFuKFxuICAgIGtleTogc3RyaW5nLFxuICAgIHRpbWVzdGFtcD86IG51bWJlciA9IGdldEN1cnJlbnRUaW1lc3RhbXAoKSxcbiAgICBleHRyYXM/OiBFeHRyYXMsXG4gICkge1xuICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IHN0YXJ0VGltZXNwYW4gLSBoYXMgY2xvc2VkIGlnbm9yaW5nOiAnLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdGltZXNwYW5zW2tleV0pIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IEF0dGVtcHRpbmcgdG8gc3RhcnQgYSB0aW1lc3BhbiB0aGF0IGFscmVhZHkgZXhpc3RzICcsXG4gICAgICAgICAga2V5LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3RpbWVzcGFuc1trZXldID0ge1xuICAgICAgc3RhcnRUaW1lOiB0aW1lc3RhbXAsXG4gICAgICBzdGFydEV4dHJhczogZXh0cmFzLFxuICAgIH07XG4gICAgX2Nvb2tpZXNba2V5XSA9IFN5c3RyYWNlLmJlZ2luQXN5bmNFdmVudChrZXkpO1xuICAgIGlmIChQUklOVF9UT19DT05TT0xFKSB7XG4gICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlci5qcycsICdzdGFydDogJyArIGtleSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2lzTG9nZ2luZ0ZvcldlYlBlcmZvcm1hbmNlKSB7XG4gICAgICBwZXJmb3JtYW5jZS5tYXJrKGAke1dFQl9QRVJGT1JNQU5DRV9QUkVGSVh9X3RpbWVzcGFuX3N0YXJ0XyR7a2V5fWAsIHtcbiAgICAgICAgc3RhcnRUaW1lOiB0aW1lc3RhbXAsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdG9wVGltZXNwYW4oXG4gICAga2V5OiBzdHJpbmcsXG4gICAgdGltZXN0YW1wPzogbnVtYmVyID0gZ2V0Q3VycmVudFRpbWVzdGFtcCgpLFxuICAgIGV4dHJhcz86IEV4dHJhcyxcbiAgKSB7XG4gICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlcjogc3RvcFRpbWVzcGFuIC0gaGFzIGNsb3NlZCBpZ25vcmluZzogJywga2V5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0aW1lc3BhbiA9IHRoaXMuX3RpbWVzcGFuc1trZXldO1xuICAgIGlmICghdGltZXNwYW4gfHwgdGltZXNwYW4uc3RhcnRUaW1lID09IG51bGwpIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IEF0dGVtcHRpbmcgdG8gZW5kIGEgdGltZXNwYW4gdGhhdCBoYXMgbm90IHN0YXJ0ZWQgJyxcbiAgICAgICAgICBrZXksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aW1lc3Bhbi5lbmRUaW1lICE9IG51bGwpIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IEF0dGVtcHRpbmcgdG8gZW5kIGEgdGltZXNwYW4gdGhhdCBoYXMgYWxyZWFkeSBlbmRlZCAnLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aW1lc3Bhbi5lbmRFeHRyYXMgPSBleHRyYXM7XG4gICAgdGltZXNwYW4uZW5kVGltZSA9IHRpbWVzdGFtcDtcbiAgICB0aW1lc3Bhbi50b3RhbFRpbWUgPSB0aW1lc3Bhbi5lbmRUaW1lIC0gKHRpbWVzcGFuLnN0YXJ0VGltZSB8fCAwKTtcbiAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSkge1xuICAgICAgaW5mb0xvZygnUGVyZm9ybWFuY2VMb2dnZXIuanMnLCAnZW5kOiAnICsga2V5KTtcbiAgICB9XG5cbiAgICBpZiAoX2Nvb2tpZXNba2V5XSAhPSBudWxsKSB7XG4gICAgICBTeXN0cmFjZS5lbmRBc3luY0V2ZW50KGtleSwgX2Nvb2tpZXNba2V5XSk7XG4gICAgICBkZWxldGUgX2Nvb2tpZXNba2V5XTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faXNMb2dnaW5nRm9yV2ViUGVyZm9ybWFuY2UpIHtcbiAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoYCR7V0VCX1BFUkZPUk1BTkNFX1BSRUZJWH1fJHtrZXl9YCwge1xuICAgICAgICBzdGFydDogYCR7V0VCX1BFUkZPUk1BTkNFX1BSRUZJWH1fdGltZXNwYW5fc3RhcnRfJHtrZXl9YCxcbiAgICAgICAgZW5kOiB0aW1lc3RhbXAsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLy8gUmUtZXhwb3J0aW5nIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIGFsbCB0aGUgY2xpZW50cyB0aGF0XG4vLyBtYXkgc3RpbGwgaW1wb3J0IGl0IGZyb20gdGhpcyBtb2R1bGUuXG5leHBvcnQgdHlwZSB7RXh0cmFzLCBFeHRyYVZhbHVlLCBJUGVyZm9ybWFuY2VMb2dnZXIsIFRpbWVzcGFufTtcblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgcGVyZm9ybWFuY2UgbG9nZ2VycyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbGxlY3QgYW5kIGxvZ1xuICogdmFyaW91cyBwZXJmb3JtYW5jZSBkYXRhIHN1Y2ggYXMgdGltZXNwYW5zLCBwb2ludHMgYW5kIGV4dHJhcy5cbiAqIFRoZSBsb2dnZXJzIG5lZWQgdG8gaGF2ZSBtaW5pbWFsIG92ZXJoZWFkIHNpbmNlIHRoZXkncmUgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVQZXJmb3JtYW5jZUxvZ2dlcihcbiAgaXNMb2dnaW5nRm9yV2ViUGVyZm9ybWFuY2U/OiBib29sZWFuLFxuKTogSVBlcmZvcm1hbmNlTG9nZ2VyIHtcbiAgcmV0dXJuIG5ldyBQZXJmb3JtYW5jZUxvZ2dlcihpc0xvZ2dpbmdGb3JXZWJQZXJmb3JtYW5jZSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBaUJBLElBQUFBLFFBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFlBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLFFBQUEsR0FBQUQsc0JBQUEsQ0FBQUYsT0FBQTtBQUFnQyxJQUFBSSxxQkFBQTtBQUFBLFNBQUFMLHdCQUFBTSxDQUFBLEVBQUFDLENBQUEsNkJBQUFDLE9BQUEsTUFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBUix1QkFBQSxZQUFBQSx3QkFBQU0sQ0FBQSxFQUFBQyxDQUFBLFNBQUFBLENBQUEsSUFBQUQsQ0FBQSxJQUFBQSxDQUFBLENBQUFLLFVBQUEsU0FBQUwsQ0FBQSxNQUFBTSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSxLQUFBQyxTQUFBLFFBQUFDLE9BQUEsRUFBQVYsQ0FBQSxpQkFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxTQUFBUSxDQUFBLE1BQUFGLENBQUEsR0FBQUwsQ0FBQSxHQUFBRyxDQUFBLEdBQUFELENBQUEsUUFBQUcs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